<div class="bg-gray-600">
  <div class="mx-auto max-w-7xl min-h-screen bg-gray-200">
    <h1 class="p-2 text-2xl font-bold font-serif">Analytics</h1>
    <p class="p-2 text-gray-600 mb-6">ログイン中のメールアドレス：<%= Current.user.email_address if Current.user %></p>
    <div class="flex justify-center">
      <div class="mx-5 bg-white p-8 rounded-lg shadow-lg w-full max-w-7xl h-full">
        <div class="text-center my-6">
          <h2 class="text-xl font-bold">ユーザー数の動向（過去1ヶ月）</h2>
        </div>
        <%= line_chart User.where(created_at: 1.month.ago.beginning_of_day..Time.current.end_of_day).group_by_day(:created_at).count %>
      </div>
    </div>

    <!-- ユーザー一覧のテーブル -->
    <div class="mt-10">
      <h2 class="text-xl font-bold text-center mb-4">ユーザー一覧</h2>
      <table class="table-auto w-full bg-white rounded-lg shadow-lg">
        <thead>
          <tr class="bg-gray-300">
            <th class="px-4 py-2">ID</th>
            <th class="px-4 py-2">メールアドレス</th>
            <th class="px-4 py-2">登録日</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
          <tr class="border-t">
            <td class="px-4 py-2"><%= user.id %></td>
            <td class="px-4 py-2"><%= user.email_address %></td>
            <td class="px-4 py-2"><%= user.created_at.strftime('%Y-%m-%d') %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
      <!-- ページネーションリンク -->
      <div class="mt-6 flex justify-center">
        <nav class="inline-flex shadow-sm rounded-md" aria-label="Pagination">
          <%= pagy_nav(@pagy).html_safe %>
        </nav>
      </div>
    </div>
  </div>
</div>